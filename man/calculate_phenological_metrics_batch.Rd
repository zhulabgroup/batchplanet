% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_phenological_metrics.R
\name{calculate_phenological_metrics_batch}
\alias{calculate_phenological_metrics_batch}
\title{Calculate phenological metrics for time series from multiple sites and groups}
\usage{
calculate_phenological_metrics_batch(
  dir,
  v_site = NULL,
  v_group = NULL,
  v_year = NULL,
  df_thres = NULL,
  var_index = "evi",
  min_days = 80,
  check_seasonality = T,
  extend_to_previous_year = 275,
  extend_to_next_year = 90,
  num_cores = 3
)
}
\arguments{
\item{dir}{Character. Base directory containing remote sensing index files (expects \verb{clean/} subdirectory).}

\item{v_site}{Character vector, optional. Site identifiers to process; if \code{NULL}, all sites are included.}

\item{v_group}{Character vector, optional. Group identifiers to process; if \code{NULL}, all groups are included.}

\item{v_year}{Integer vector, optional. Years to process; if \code{NULL}, all years in the data are included.}

\item{df_thres}{Data frame of thresholds as from \code{\link[=set_thresholds]{set_thresholds()}}; if \code{NULL}, uses default thresholds.}

\item{var_index}{Character. Name of the remote sensing index column in the input data frame \code{df_index} to analyze (default: "evi").}

\item{min_days}{Numeric. Minimum required number of non-NA data points in one year (default: 80).}

\item{check_seasonality}{Logical. If \code{TRUE}, tests for significant seasonal changes before calculating phenological metrics (default: \code{TRUE}).}

\item{extend_to_previous_year}{Integer. Day of year to extend backward to, to capture early-year events (default: 275).}

\item{extend_to_next_year}{Integer. Day of year to extend forward to, to capture late-year events (default: 90).}

\item{num_cores}{Integer. Number of parallel workers for processing (default: 3).}
}
\value{
Invisibly returns \code{NULL} and saves calculated phenological metrics as \code{.rds} files in the \verb{doy/} subdirectory of \code{dir}.
}
\description{
Reads remote sensing index time series files from the \verb{clean/} subdirectory within the specified \code{dir}.
For each site, group, and year combination, the function extends the time series to include the end of the previous year and the beginning of the next year (to capture early- and late-year phenological events), then calls \code{calculate_phenological_metrics()} to calculate phenological metrics for each time series.
Results are saved as \code{.rds} files under the \verb{doy/} subdirectory within \code{dir}, prefixed \code{doy_}.
}
\examples{
\dontrun{
# Example: Calculate phenological metrics for two sites and two groups
df_thres <- set_thresholds(thres_up = c(0.3, 0.5))
calculate_phenological_metrics_batch(
  dir = "alldata/PSdata/",
  v_site = c("Site1", "Site2"),
  v_group = c("Group1", "Group2"),
  v_year = c(2023, 2024),
  df_thres = df_thres,
  var_index = "evi",
  min_days = 80,
  check_seasonality = TRUE,
  extend_to_previous_year = 275,
  extend_to_next_year = 90,
  num_cores = 3
)
}

}
